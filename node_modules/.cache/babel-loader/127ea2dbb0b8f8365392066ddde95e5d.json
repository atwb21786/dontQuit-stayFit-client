{"ast":null,"code":"import _toConsumableArray from\"/Users/andrewburchett/thinkful/capstone/dontquit-stayfit-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/andrewburchett/thinkful/capstone/dontquit-stayfit-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/andrewburchett/thinkful/capstone/dontquit-stayfit-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/andrewburchett/thinkful/capstone/dontquit-stayfit-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/andrewburchett/thinkful/capstone/dontquit-stayfit-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import config from'../config';import TokenService from'../Service/token-service';var Fitness=/*#__PURE__*/function(_React$Component){_inherits(Fitness,_React$Component);var _super=_createSuper(Fitness);function Fitness(){var _this;_classCallCheck(this,Fitness);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={fitness:[],editFitness:null};_this.componentDidMount=function(){fetch(\"\".concat(config.API_ENDPOINT,\"/fitness\"),{headers:{'Authorization':\"Bearer \".concat(TokenService.getAuthToken())}}).then(function(fitnessLog){if(!fitnessLog.ok){return fitnessLog.json().then(function(e){return Promise.reject(e);});}return fitnessLog.json();}).then(function(fitnessLog){_this.setState({fitness:fitnessLog,date_created:new Date()});});};_this.addWorkoutForm=function(e){e.preventDefault();var fit=e.target.content.value;fetch(\"\".concat(config.API_ENDPOINT,\"/fitness\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(TokenService.getAuthToken())},body:JSON.stringify({content:fit,date_created:new Date()})}).then(function(res){return res.json();}).then(function(workout){_this.setState({fitness:[].concat(_toConsumableArray(_this.state.fitness),[workout])});_this.props.history.push('/fitness');});e.target.reset();};_this.deleteWorkout=function(e,index){e.preventDefault();console.log(index);fetch(\"\".concat(config.API_ENDPOINT,\"/fitness/\").concat(index),{method:'DELETE',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(TokenService.getAuthToken())}}).then(function(res){if(!res.ok)return res.json().then(function(e){return Promise.reject(e);});}).then(function(){_this.setState({fitness:_this.state.fitness.filter(function(fit){return fit.id!==index;})});});};_this.updateData=function(e){e.preventDefault();var data={content:e.target.content.value};fetch(\"\".concat(config.API_ENDPOINT,\"/fitness/\").concat(_this.state.editFitness),{method:'PATCH',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(TokenService.getAuthToken())},body:JSON.stringify(data)}).then(function(goal){_this.setState({fitness:_this.state.fitness.map(function(workout){if(workout.id===_this.state.editFitness){workout.content=data.content;}return workout;}),editFitness:null});_this.props.history.push('/fitness');});};_this.openEdit=function(id){_this.setState({editFitness:id});};_this.cancelAddedWorkout=function(){_this.setState({editFitness:null});};_this.handleClickCancel=function(){_this.props.history.push('/homepage');};return _this;}_createClass(Fitness,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"main\",null,/*#__PURE__*/React.createElement(\"h4\",null,\"ENTER WORKOUT\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.addWorkoutForm},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"fitness\"}),/*#__PURE__*/React.createElement(\"textarea\",{name:\"content\",required:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"ENTER\"),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",onClick:this.handleClickCancel},\"CANCEL\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h4\",null,\"FITNESS LOG:\"),/*#__PURE__*/React.createElement(\"ul\",null,this.state.fitness.map(function(item,index){return/*#__PURE__*/React.createElement(\"li\",{key:index},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(e){return _this2.deleteWorkout(e,item.id);}},\"Delete\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return _this2.openEdit(item.id);}},\"Update\"),_this2.state.editFitness===item.id?/*#__PURE__*/React.createElement(\"form\",{onSubmit:_this2.updateData},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"fitness\"}),/*#__PURE__*/React.createElement(\"textarea\",{name:\"content\",required:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"ENTER\"),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",onClick:_this2.cancelAddedWorkout},\"CANCEL\")):\"\",item.content,item.date_created);}))));}}]);return Fitness;}(React.Component);export default Fitness;","map":{"version":3,"sources":["/Users/andrewburchett/thinkful/capstone/dontquit-stayfit-client/src/Fitness/Fitness.js"],"names":["React","config","TokenService","Fitness","state","fitness","editFitness","componentDidMount","fetch","API_ENDPOINT","headers","getAuthToken","then","fitnessLog","ok","json","e","Promise","reject","setState","date_created","Date","addWorkoutForm","preventDefault","fit","target","content","value","method","body","JSON","stringify","res","workout","props","history","push","reset","deleteWorkout","index","console","log","filter","id","updateData","data","goal","map","openEdit","cancelAddedWorkout","handleClickCancel","item","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport config from '../config'\nimport TokenService from '../Service/token-service'\n\nclass Fitness extends React.Component {\n    \n    state = {\n        fitness: [],\n        editFitness: null\n    }\n\n    componentDidMount = () => {\n        fetch(`${config.API_ENDPOINT}/fitness`, {\n            headers: {\n                'Authorization': `Bearer ${TokenService.getAuthToken()}`\n            },\n        })\n        .then(fitnessLog => {\n            if(!fitnessLog.ok) {\n                return fitnessLog.json().then((e) => Promise.reject(e))\n            }\n            return fitnessLog.json()\n        })\n        .then(fitnessLog => {\n            this.setState({\n                fitness: fitnessLog,\n                date_created: new Date()\n            })\n        })\n    }\n\n    addWorkoutForm = e => {\n        e.preventDefault()\n        const fit = e.target.content.value;\n        fetch(`${config.API_ENDPOINT}/fitness`, {\n            method: 'POST', \n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${TokenService.getAuthToken()}`\n\n            },\n            body: JSON.stringify({\n                content: fit,\n                date_created: new Date()\n            })\n        })\n        .then(res => res.json())\n        .then((workout) => {\n            this.setState({\n                fitness: [...this.state.fitness, workout]\n            })\n            this.props.history.push('/fitness')\n        })\n        e.target.reset()\n    }\n\n    deleteWorkout = (e, index) => {\n        e.preventDefault()\n        console.log(index)\n        fetch(`${config.API_ENDPOINT}/fitness/${index}`, {\n            method: 'DELETE', \n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${TokenService.getAuthToken()}`\n            }\n        })\n        .then(res => { \n            if (!res.ok) \n                return res.json().then(e => Promise.reject(e))\n        })\n        .then(() => {\n            this.setState({\n                fitness: this.state.fitness.filter(fit => fit.id !== index)\n            })\n        })   \n    }\n\n    updateData = (e) => {\n        e.preventDefault()\n        const data = { \n            content: e.target.content.value\n        }\n        fetch(`${config.API_ENDPOINT}/fitness/${this.state.editFitness}`, {\n            method: 'PATCH', \n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${TokenService.getAuthToken()}`\n            },\n            body: JSON.stringify(data)\n        })\n        .then((goal) => {\n            this.setState({\n                fitness: this.state.fitness.map(workout => { \n                    if(workout.id === this.state.editFitness) {\n                        workout.content = data.content\n                    }\n                    return workout\n                }), \n                editFitness: null\n            })\n            this.props.history.push('/fitness')\n        })\n    }\n\n    openEdit = (id) => {\n        this.setState({\n            editFitness: id\n        })\n    }\n\n    cancelAddedWorkout = () => {\n        this.setState({\n            editFitness: null\n        })\n    }\n\n    handleClickCancel = () => {\n        this.props.history.push('/homepage')\n    }\n    \n    render() {\n        return(\n            <div>\n                <main>\n                    <h4>ENTER WORKOUT</h4>\n                        <form onSubmit={this.addWorkoutForm}>\n                            <label htmlFor=\"fitness\"></label>\n                            <textarea name='content' required></textarea>\n                            <br/>\n                            <button type='submit'>ENTER</button>\n                            <button type='submit' onClick={this.handleClickCancel}>CANCEL</button>\n                        </form>\n                    <br/>\n                    <h4>FITNESS LOG:</h4>\n                    <ul>\n                        {this.state.fitness.map((item, index) => (\n                                \n                                <li key={index}>\n                                <button onClick={(e) => this.deleteWorkout(e, item.id)}>Delete</button>\n                                <button onClick={() => this.openEdit(item.id)}>Update</button>\n                                {this.state.editFitness === item.id ? \n                                (<form onSubmit={this.updateData}>\n                                    <label htmlFor=\"fitness\"></label>\n                                    <textarea name='content' required></textarea>\n                                    <br/>\n                                    <button type='submit'>ENTER</button>\n                                    <button type='submit' onClick={this.cancelAddedWorkout}>CANCEL</button>\n                                </form>) : \"\" }\n\n                                    {item.content}\n                                    {item.date_created}\n                                </li>\n                            ))}\n                    </ul>\n                </main>\n            </div>\n        )\n    }\n}\n\nexport default Fitness"]},"metadata":{},"sourceType":"module"}