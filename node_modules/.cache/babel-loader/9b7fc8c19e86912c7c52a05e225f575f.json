{"ast":null,"code":"import _toConsumableArray from\"/Users/andrewburchett/thinkful/capstone/dontquit-stayfit-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/andrewburchett/thinkful/capstone/dontquit-stayfit-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/andrewburchett/thinkful/capstone/dontquit-stayfit-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/andrewburchett/thinkful/capstone/dontquit-stayfit-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/andrewburchett/thinkful/capstone/dontquit-stayfit-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./Weight.css';import config from'../config';import TokenService from'../Service/token-service';var Weight=/*#__PURE__*/function(_React$Component){_inherits(Weight,_React$Component);var _super=_createSuper(Weight);function Weight(){var _this;_classCallCheck(this,Weight);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={weight:[],editWeight:null};_this.componentDidMount=function(){fetch(\"\".concat(config.API_ENDPOINT,\"/weigh_in\"),{headers:{'Authorization':\"Bearer \".concat(TokenService.getAuthToken())}}).then(function(weightLog){if(!weightLog.ok){return weightLog.json().then(function(e){return Promise.reject(e);});}return weightLog.json();}).then(function(weightLog){_this.setState({weight:weightLog,date_created:new Date()});});};_this.handleAddWeight=function(e){e.preventDefault();var item=e.target.content.value;fetch(\"\".concat(config.API_ENDPOINT,\"/weigh_in\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(TokenService.getAuthToken())},body:JSON.stringify({measurement:item,date_created:new Date()})}).then(function(res){return res.json();}).then(function(weights){_this.setState({weight:[].concat(_toConsumableArray(_this.state.weight),[weights])});_this.props.history.push('/weight');});e.target.reset();};_this.deleteWeight=function(e,index){e.preventDefault();console.log(index);fetch(\"\".concat(config.API_ENDPOINT,\"/weigh_in/\").concat(index),{method:'DELETE',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(TokenService.getAuthToken())}}).then(function(res){if(!res.ok)return res.json().then(function(e){return Promise.reject(e);});}).then(function(){_this.setState({weight:_this.state.weight.filter(function(wt){return wt.id!==index;})});});};_this.updateData=function(e){e.preventDefault();var data={measurement:e.target.content.value};fetch(\"\".concat(config.API_ENDPOINT,\"/weigh_in/\").concat(_this.state.editWeight),{method:'PATCH',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(TokenService.getAuthToken())},body:JSON.stringify(data)}).then(function(wt){_this.setState({weight:_this.state.weight.map(function(wt){if(wt.id===_this.state.editWeight){wt.measurement=data.measurement;}console.log(wt);return wt;}),editWeight:null});_this.props.history.push('/weight');});};_this.openEdit=function(id){_this.setState({editWeight:id});};_this.cancelAddedWeight=function(){_this.setState({editWeight:null});};_this.handleClickCancel=function(){_this.props.history.push('/homepage');};return _this;}_createClass(Weight,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"main\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"ENTER WEIGHT\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleAddWeight},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"content\"}),/*#__PURE__*/React.createElement(\"input\",{className:\"weight\",type:\"number\",step:\"0.1\",id:\"content\",name:\"content\",required:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"ENTER\"),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",onClick:this.handleClickCancel},\"CANCEL\")),/*#__PURE__*/React.createElement(\"h4\",{className:\"weightLog\"},\"WEIGHT LOG:\"),/*#__PURE__*/React.createElement(\"ul\",null,this.state.weight.map(function(item,index){return/*#__PURE__*/React.createElement(\"li\",{key:index},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(e){return _this2.deleteWeight(e,item.id);}},\"Delete\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return _this2.openEdit(item.id);}},\"Update\"),_this2.state.editWeight===item.id?/*#__PURE__*/React.createElement(\"form\",{onSubmit:_this2.updateData},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"content\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",step:\"0.1\",id:\"content\",name:\"content\",required:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"ENTER\"),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",onClick:_this2.cancelAddedWeight},\"CANCEL\")):\"\",new Date(item.date_created).toLocaleDateString(\"en-US\")+\" \",new Date(item.date_created).toLocaleTimeString(\"en-US\")+\": \",item.measurement+\" lbs\");}))));}}]);return Weight;}(React.Component);export default Weight;","map":{"version":3,"sources":["/Users/andrewburchett/thinkful/capstone/dontquit-stayfit-client/src/Weight/Weight.js"],"names":["React","config","TokenService","Weight","state","weight","editWeight","componentDidMount","fetch","API_ENDPOINT","headers","getAuthToken","then","weightLog","ok","json","e","Promise","reject","setState","date_created","Date","handleAddWeight","preventDefault","item","target","content","value","method","body","JSON","stringify","measurement","res","weights","props","history","push","reset","deleteWeight","index","console","log","filter","wt","id","updateData","data","map","openEdit","cancelAddedWeight","handleClickCancel","toLocaleDateString","toLocaleTimeString","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport './Weight.css'\nimport config from '../config'\nimport TokenService from '../Service/token-service'\n\nclass Weight extends React.Component {\n\n    state = {\n        weight: [],\n        editWeight: null\n    }\n\n    componentDidMount = () => {\n        fetch(`${config.API_ENDPOINT}/weigh_in`, {\n            headers: {\n                'Authorization': `Bearer ${TokenService.getAuthToken()}`\n            },\n        })\n        .then(weightLog => {\n            if(!weightLog.ok) {\n                return weightLog.json().then((e) => Promise.reject(e))\n            }\n            return weightLog.json()\n        })\n        .then(weightLog => {\n            this.setState({\n                weight: weightLog,\n                date_created: new Date()\n            })\n        })\n    }\n\n    handleAddWeight = e => {\n        e.preventDefault();\n        const item = e.target.content.value;\n        fetch(`${config.API_ENDPOINT}/weigh_in`, {\n            method: 'POST', \n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${TokenService.getAuthToken()}`\n\n            },\n            body: JSON.stringify({\n                measurement: item,\n                date_created: new Date()\n            })\n        })\n        .then(res => res.json())\n        .then((weights) => {\n            this.setState({\n                weight: [...this.state.weight, weights]\n            })\n            this.props.history.push('/weight')\n        })\n        e.target.reset()\n    }\n\n    deleteWeight = (e, index) => {\n        e.preventDefault()\n        console.log(index)\n        fetch(`${config.API_ENDPOINT}/weigh_in/${index}`, {\n            method: 'DELETE', \n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${TokenService.getAuthToken()}`\n            }\n        })\n        .then(res => { \n            if (!res.ok) \n                return res.json().then(e => Promise.reject(e))\n        })\n        .then(() => {\n            this.setState({\n                weight: this.state.weight.filter(wt => wt.id !== index)\n            })\n        })   \n    }\n\n    updateData = (e) => {\n        e.preventDefault()\n        const data = { \n            measurement: e.target.content.value\n        }\n        fetch(`${config.API_ENDPOINT}/weigh_in/${this.state.editWeight}`, {\n            method: 'PATCH', \n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${TokenService.getAuthToken()}`\n            },\n            body: JSON.stringify(data)\n        })\n        .then((wt) => {\n            this.setState({\n                weight: this.state.weight.map(wt => { \n                    if(wt.id === this.state.editWeight) {\n                        wt.measurement = data.measurement\n                    }\n                    console.log(wt)\n                    return wt\n                }), \n                editWeight: null\n            })\n            this.props.history.push('/weight')\n        })\n    }\n\n    openEdit = (id) => {\n        this.setState({\n            editWeight: id\n        })\n    }\n\n    cancelAddedWeight = () => {\n        this.setState({\n            editWeight: null\n        })\n    }\n\n    handleClickCancel = () => {\n        this.props.history.push('/homepage')\n    }\n\n\n\n    render() {\n        return(\n            <div>\n                <main>\n                    <h2>ENTER WEIGHT</h2>\n                        <form onSubmit={this.handleAddWeight}>\n                            <label htmlFor=\"content\"></label>\n                            <input className=\"weight\" type=\"number\" step=\"0.1\" id=\"content\" name=\"content\" required/>\n                            <br/>\n                            <button type='submit'>ENTER</button>\n                            <button type='submit' onClick={this.handleClickCancel}>CANCEL</button>\n                        </form>\n                    \n                    <h4 className=\"weightLog\" >WEIGHT LOG:</h4>\n                    <ul>\n                        {this.state.weight.map((item, index) => (\n                                \n                                <li key={index}>\n                                <button onClick={(e) => this.deleteWeight(e, item.id)}>Delete</button>\n                                <button onClick={() => this.openEdit(item.id)}>Update</button>\n                                {this.state.editWeight === item.id ? \n                                (<form onSubmit={this.updateData}>\n                                    <label htmlFor=\"content\"></label>\n                                    <input type=\"number\" step=\"0.1\" id=\"content\" name=\"content\" required/>\n                                    <br/>\n                                    <button type='submit'>ENTER</button>\n                                    <button type='submit' onClick={this.cancelAddedWeight}>CANCEL</button>\n                                </form>) : \"\" }\n\n                                    {new Date(item.date_created).toLocaleDateString(\"en-US\") + \" \"}\n                                    {new Date(item.date_created).toLocaleTimeString(\"en-US\") + \": \"}\n                                    {item.measurement + \" lbs\"}\n                                    \n\n                                </li>\n                            ))}\n                    </ul>\n                </main>\n            </div>\n        )\n    }\n}\n\nexport default Weight"]},"metadata":{},"sourceType":"module"}