{"ast":null,"code":"import _toConsumableArray from\"/Users/andrewburchett/thinkful/capstone/dontquit-stayfit-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/andrewburchett/thinkful/capstone/dontquit-stayfit-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/andrewburchett/thinkful/capstone/dontquit-stayfit-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/andrewburchett/thinkful/capstone/dontquit-stayfit-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/andrewburchett/thinkful/capstone/dontquit-stayfit-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./Goals.css';import config from'../config';import TokenService from'../Service/token-service';var Goals=/*#__PURE__*/function(_React$Component){_inherits(Goals,_React$Component);var _super=_createSuper(Goals);function Goals(){var _this;_classCallCheck(this,Goals);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={goals:[],editGoal:null};_this.componentDidMount=function(){fetch(\"\".concat(config.API_ENDPOINT,\"/goals\"),{headers:{'Authorization':\"Bearer \".concat(TokenService.getAuthToken())}}).then(function(goalLog){if(!goalLog.ok){return goalLog.json().then(function(e){return Promise.reject(e);});}return goalLog.json();}).then(function(goalLog){_this.setState({goals:goalLog,date_created:new Date()});});};_this.handleAddGoal=function(e){e.preventDefault();var goal=e.target.content.value;fetch(\"\".concat(config.API_ENDPOINT,\"/goals\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(TokenService.getAuthToken())},body:JSON.stringify({content:goal,date_created:new Date()})}).then(function(res){return res.json();}).then(function(goal){_this.setState({goals:[].concat(_toConsumableArray(_this.state.goals),[goal])});_this.props.history.push('/goals');});e.target.reset();};_this.deleteGoal=function(e,index){e.preventDefault();console.log(index);fetch(\"\".concat(config.API_ENDPOINT,\"/goals/\").concat(index),{method:'DELETE',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(TokenService.getAuthToken())}}).then(function(res){if(!res.ok)return res.json().then(function(e){return Promise.reject(e);});}).then(function(){_this.setState({goals:_this.state.goals.filter(function(goal){return goal.id!==index;})});});};_this.updateData=function(e){e.preventDefault();var data={content:e.target.content.value};fetch(\"\".concat(config.API_ENDPOINT,\"/goals/\").concat(_this.state.editGoal),{method:'PATCH',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(TokenService.getAuthToken())},body:JSON.stringify(data)}).then(function(goal){_this.setState({goals:_this.state.goals.map(function(goal){if(goal.id===_this.state.editGoal){goal.content=data.content;}return goal;}),editGoal:null});_this.props.history.push('/goals');});};_this.openEdit=function(id){_this.setState({editGoal:id});};_this.cancelAddedGoal=function(){_this.setState({editGoal:null});};_this.handleClickCancel=function(){_this.props.history.push('/homepage');};return _this;}_createClass(Goals,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"main\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleAddGoal},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"goals\"}),/*#__PURE__*/React.createElement(\"textarea\",{name:\"content\",className:\"goals\",required:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"ENTER\"),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",onClick:this.handleClickCancel},\"CANCEL\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h4\",{className:\"goalsLog\"},\"GOALS:\"),/*#__PURE__*/React.createElement(\"ul\",null,this.state.goals.map(function(goal,index){return/*#__PURE__*/React.createElement(\"li\",{key:index},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(e){return _this2.deleteGoal(e,goal.id);}},\"Delete\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return _this2.openEdit(goal.id);}},\"Update\"),_this2.state.editGoal===goal.id?/*#__PURE__*/React.createElement(\"form\",{className:\"logList\",onSubmit:_this2.updateData},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"goals\"}),/*#__PURE__*/React.createElement(\"textarea\",{name:\"content\",required:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"ENTER\"),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",onClick:_this2.cancelAddedGoal},\"CANCEL\")):\"\",goal.content,goal.date_created);}))));}}]);return Goals;}(React.Component);export default Goals;","map":{"version":3,"sources":["/Users/andrewburchett/thinkful/capstone/dontquit-stayfit-client/src/Goals/Goals.js"],"names":["React","config","TokenService","Goals","state","goals","editGoal","componentDidMount","fetch","API_ENDPOINT","headers","getAuthToken","then","goalLog","ok","json","e","Promise","reject","setState","date_created","Date","handleAddGoal","preventDefault","goal","target","content","value","method","body","JSON","stringify","res","props","history","push","reset","deleteGoal","index","console","log","filter","id","updateData","data","map","openEdit","cancelAddedGoal","handleClickCancel","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport './Goals.css'\nimport config from '../config'\nimport TokenService from '../Service/token-service'\n\nclass Goals extends React.Component {\n    \n    state = {\n        goals: [],\n        editGoal: null\n    }\n\n    componentDidMount = () => {\n        fetch(`${config.API_ENDPOINT}/goals`, {\n            headers: {\n                'Authorization': `Bearer ${TokenService.getAuthToken()}`\n            },\n        })\n        .then(goalLog => {\n            if(!goalLog.ok) {\n                return goalLog.json().then((e) => Promise.reject(e))\n            }\n            return goalLog.json()\n        })\n        .then(goalLog => {\n            this.setState({\n                goals: goalLog,\n                date_created: new Date()\n            })\n        })\n    }\n\n    \n    handleAddGoal = e => {\n        e.preventDefault()\n        const goal = e.target.content.value;\n        fetch(`${config.API_ENDPOINT}/goals`, {\n            method: 'POST', \n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${TokenService.getAuthToken()}`\n\n            },\n            body: JSON.stringify({\n                content: goal,\n                date_created: new Date()\n            })\n        })\n        .then(res => res.json())\n        .then((goal) => {\n            this.setState({\n                goals: [...this.state.goals, goal]\n            })\n            this.props.history.push('/goals')\n        })\n        e.target.reset()\n    }\n\n    \n\n    deleteGoal = (e, index) => {\n        e.preventDefault()\n        console.log(index)\n        fetch(`${config.API_ENDPOINT}/goals/${index}`, {\n            method: 'DELETE', \n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${TokenService.getAuthToken()}`\n            }\n        })\n        .then(res => { \n            if (!res.ok) \n                return res.json().then(e => Promise.reject(e))\n        })\n        .then(() => {\n            this.setState({\n                goals: this.state.goals.filter(goal => goal.id !== index)\n            })\n        })   \n    }\n\n    updateData = (e) => {\n        e.preventDefault()\n        const data = { \n            content: e.target.content.value\n        }\n        fetch(`${config.API_ENDPOINT}/goals/${this.state.editGoal}`, {\n            method: 'PATCH', \n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${TokenService.getAuthToken()}`\n            },\n            body: JSON.stringify(data)\n        })\n        .then((goal) => {\n            this.setState({\n                goals: this.state.goals.map(goal => { \n                    if(goal.id === this.state.editGoal) {\n                        goal.content = data.content\n                    }\n                    return goal\n                }), \n                editGoal: null\n            })\n            this.props.history.push('/goals')\n        })\n    }\n\n    openEdit = (id) => {\n        this.setState({\n            editGoal: id\n        })\n    }\n\n    cancelAddedGoal = () => {\n        this.setState({\n            editGoal: null\n        })\n    }\n\n    handleClickCancel = () => {\n        this.props.history.push('/homepage')\n    }\n\n    render() {\n        return(\n            <div>\n                <main>\n                    <form onSubmit={this.handleAddGoal}>\n                        <label htmlFor='goals'></label>\n                        <textarea name=\"content\" className=\"goals\" required></textarea>\n                        <br/>\n                        <button type='submit' >ENTER</button>\n                        <button type='submit' onClick={this.handleClickCancel}>CANCEL</button>\n                    </form>\n                    <br/>\n                    <h4 className=\"goalsLog\">GOALS:</h4>\n                    <ul>\n                        {this.state.goals.map((goal, index) => (\n                            \n                            <li key={index}>\n                            <button onClick={(e) => this.deleteGoal(e, goal.id)}>Delete</button>\n                            <button onClick={() => this.openEdit(goal.id)}>Update</button>\n                            {this.state.editGoal === goal.id ? \n                            (<form className=\"logList\" onSubmit={this.updateData} >\n                                <label htmlFor='goals'></label>\n                                <textarea name=\"content\" required></textarea>\n                                <br/>\n                                <button type='submit'>ENTER</button>\n                                <button type='submit' onClick={this.cancelAddedGoal}>CANCEL</button>\n                            </form>) : \"\" }\n                            \n                                {goal.content}\n                                {goal.date_created}\n\n                            </li>\n                        ))}\n                    </ul>\n                </main>\n            </div>\n        )\n    }\n}\n\nexport default Goals"]},"metadata":{},"sourceType":"module"}